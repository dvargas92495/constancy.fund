datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-1.0.x"]
}

model Contract {
  uuid String @id @default(uuid())
  type Int
  userId String
  contractDetails ContractDetail[]
  agreements Agreement[]
}

model ContractDetail {
  uuid String @id @default(uuid())
  label String
  value String
  contractUuid String
  contract Contract @relation(fields: [contractUuid], references: [uuid])
}

model Agreement {
  uuid String @id @default(uuid())
  name String
  email String
  amount Int
  contractUuid String
  investorUuid String? @default(uuid())
  contract Contract @relation(fields: [contractUuid], references: [uuid])
  eversign EversignDocument?
}

model EversignDocument {
  id String @id
  agreementUuid String
  agreement Agreement @relation(fields: [agreementUuid], references: [uuid])
}

model PaymentPreference {
  uuid String @id @default(uuid())
  userId String
  type Int
  paymentPreferenceDetails PaymentPreferenceDetail[]
  @@unique([userId, type])
}

model PaymentPreferenceDetail {
  uuid String @id @default(uuid())
  label String
  value String
  paymentPreferenceUuid String
  paymentPreference PaymentPreference @relation(fields: [paymentPreferenceUuid], references: [uuid])
  @@unique([paymentPreferenceUuid, label])
}

model Investor {
  uuid String @id @default(uuid())
  name String
  email String
}
